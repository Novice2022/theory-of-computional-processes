<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сети Петри</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bitcount+Prop+Single:wght@100..900&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.9.0/d3.min.js"></script>

    <link rel="stylesheet" href="./styles/main.css">
    <link rel="stylesheet" href="./styles/net.css">
</head>
<body>
    <div class="content">
        <div class="row">
            <div id="net">
                <div class="states">
                    <div class="state-component" id="state-ready-to-consume" name="sa">
                        <span class="state-label">Готов потреблять</span>
                        <p class="state">
                            <span class="state-value">b</span>
                        </p>
                    </div>
                    <div class="state-component" id="state-received" name="sb">
                        <span class="state-label">Получено</span>
                        <p class="state">
                            <span class="state-value"></span>
                        </p>
                    </div>
                    <div class="state-component" id="state-limit-to-out" name="sc">
                        <span class="state-label">Огранич. на выход. буфер</span>
                        <p class="state">
                            <span class="state-value">d</span>
                        </p>
                    </div>
                    <div class="state-component" id="state-out" name="sd">
                        <span class="state-label">Выход. буфер</span>
                        <p class="state">
                            <span class="state-value"></span>
                        </p>
                    </div>
                    <div class="state-component" id="state-ready-to-produce" name="se">
                        <span class="state-label">Готов производить</span>
                        <p class="state">
                            <span class="state-value">a</span>
                        </p>
                    </div>
                    <div class="state-component" id="state-limit-to-in" name="sf">
                        <span class="state-label">Ограничение на вход. буфер</span>
                        <p class="state">
                            <span class="state-value">c</span>
                        </p>
                    </div>
                    <div class="state-component" id="state-in" name="sg">
                        <span class="state-label">Вход. буфер</span>
                        <p class="state">
                            <span class="state-value"></span>
                        </p>
                    </div>
                </div>
                <div class="transitions">
                    <div class="transition-component" id="transition-take-from-in" name="ta">
                        <span class="transition-label">Взять из вход. буфера</span>
                        <div class="transition-rect"></div>
                    </div>
                    <div class="transition-component" id="transition-write-to-in" name="tb">
                        <span class="transition-label">Записать во вход. буфер</span>
                        <div class="transition-rect"></div>
                    </div>
                    <div class="transition-component" id="transition-write-to-out" name="tc">
                        <span class="transition-label">Записать в выход. буфер</span>
                        <div class="transition-rect"></div>
                    </div>
                </div>
                <div class="arcs">
                    <div class="arc-component" id="sa-to-ta">
                        <div class="arc-line line-part first"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="ta-to-sb">
                        <div class="arc-line line-part first"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="sb-to-tc">
                        <div class="arc-line line-part first"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="sc-to-tc">
                        <div class="arc-line line-part first"></div>
                        <div class="arc-line line-part second"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="tc-to-sd">
                        <div class="arc-line line-part first"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="ta-to-sf">
                        <div class="arc-line line-part first"></div>
                        <div class="arc-line line-part second"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="sf-to-tb">
                        <div class="arc-line line-part first"></div>
                        <div class="arc-line line-part second"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="se-to-tb">
                        <div class="arc-line line-part first"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="tb-to-se">
                        <div class="arc-line line-part first"></div>
                        <div class="arc-line line-part second"></div>
                        <div class="arc-line line-part third"></div>
                        <div class="arc-line line-part fourth"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="tb-to-sg">
                        <div class="arc-line line-part first"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="sg-to-ta">
                        <div class="arc-line line-part first"></div>
                        <div class="arc-line line-part second"></div>
                        <div class="arc-line line-part third"></div>
                        <div class="arc-line line-part fourth"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                    <div class="arc-component" id="tc-to-sa">
                        <div class="arc-line line-part first"></div>
                        <div class="arc-line line-part second"></div>
                        <div class="arc-line line-part third"></div>
                        <div class="arc-line line-part fourth"></div>
                        <div class="arrow-end">
                            <div class="arc-line arrow-end-line left"></div>
                            <div class="arc-line arrow-end-line right"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="interface">
                <div class="settings">
                    <h2>Установка значений для состояний</h2>
                    <div class="setter">
                        <span class="state-name">Готов производить</span>
                        <div class="controllers">
                            <input type="number" class="setter-controller" value="2" min="0" id="a-setter">
                            <button type="button" class="setter-controller" onclick="updateState('a-setter', se)">Установить</button>
                        </div>
                    </div>
                    <div class="setter">
                        <span class="state-name">Готов потреблять</span>
                        <div class="controllers">
                            <input type="number" class="setter-controller" value="1" min="0" id="b-setter">
                            <button type="button" class="setter-controller" onclick="updateState('b-setter', sa)">Установить</button>
                        </div>
                    </div>
                    <div class="setter">
                        <span class="state-name">Огранич. на вход. буфер</span>
                        <div class="controllers">
                            <input type="number" class="setter-controller" value="3" min="0" id="c-setter">
                            <button type="button" class="setter-controller" onclick="updateState('c-setter', sf)">Установить</button>
                        </div>
                    </div>
                    <div class="setter">
                        <span class="state-name">Огранич. на выход. буфер</span>
                        <div class="controllers">
                            <input type="number" class="setter-controller" value="5" min="0" id="d-setter">
                            <button type="button" class="setter-controller" onclick="updateState('d-setter', sc)">Установить</button>
                        </div>
                    </div>
                    <button type="button" class="setter-controller" onclick="resetStates()">Сбросить состояния</button>
                </div>
                <div class="actions">
                    <h2>Действия</h2>
                    <div class="act-block">
                        <button id="run" type="button" onclick="setInterfaceDisabled(true)">Начать</button>
                        <button id="iterate" type="button" onclick="iterate()">Выполнить итерацию</button>
                        <button id="stop" type="button" onclick="setInterfaceDisabled(false)">Остановить</button>
                    </div>
                    <div class="act-block">
                        <button id="matrix-button" type="button" onclick="getReachabilityMatrix()">Матрица достижимости<br />(завершить выполнение)</button>
                        <button id="tree-button" type="button" onclick="getReachabilityTree()">Дерево достижимости</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="reachabilities">
            <div id="matrix">
                <h2>Матрица достижимости</h2>
                <table id="reachability-matrix">
                    <thead>
                        <tr>
                            <td>Переход</td>
                            <td>Готов потреблять</td>
                            <td>Получено</td>
                            <td>Огранич. на выход. буфер</td>
                            <td>Выход. буфер</td>
                            <td>Готов производить</td>
                            <td>Ограничение на вход. буфер</td>
                            <td>Вход. буфер</td>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div id="tree"></div>
        </div>
    </div>
    <script src="./scripts/domManagers.js"></script>
    <script src="./scripts/net.js"></script>
    <script src="./scripts/interface.js"></script>
    <script src="./scripts/main.js"></script>
</body>
</html>
